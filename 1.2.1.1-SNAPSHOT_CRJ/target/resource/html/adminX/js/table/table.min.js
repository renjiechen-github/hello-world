'use strict';var lytable={params:{},init:function(a){common.log(new Date);var b={id:"",url:"",data:[],borderColor:"#eff0f4",param:function(){return{}},ismultiple:!1,issingle:!1,singleid:"table"+parseInt(1E5*Math.random()),select:function(b){},isexp:!0,bProcessing:!1,isOverflowShow:!0,overflowfun:function(b,c){},tableAttrParam:{isshow:"show",issort:"sort",key:"key",isexport:"export",hidewidth:"hide"},createRow:function(b,c,a,f,m,n){return f},oLanguage:{sLengthMenu:"\u6bcf\u9875\u663e\u793a _MENU_ \u6761\u8bb0\u5f55",sZeroRecords:"\u62b1\u6b49\uff0c \u6ca1\u6709\u627e\u5230",sInfo:"\u4ece _START_ \u5230 _END_ /\u5171 _TOTAL_ \u6761\u6570\u636e",sInfoEmpty:"",sInfoFiltered:"(\u4ece _MAX_ \u6761\u6570\u636e\u4e2d\u68c0\u7d22)",sSearch:"\u641c\u7d22",oPaginate:{sFirst:"\u9996\u9875",sPrevious:"\u524d\u4e00\u9875",sNext:"\u540e\u4e00\u9875",sLast:"\u5c3e\u9875"},sZeroRecords:"\u6ca1\u6709\u68c0\u7d22\u5230\u6570\u636e",sProcessing:'\x3ci class\x3d"fa fa-spinner fa-lg fa-spin fa-fw"\x3e\x3c/i\x3e\u52a0\u8f7d\u4e2d...',sEmptyTable:"\u5f88\u62b1\u6b49\uff0c\u6682\u65e0\u6570\u636e\uff0c\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u66f4\u6362\u67e5\u8be2\u6761\u4ef6\u8fdb\u884c\u68c0\u7d22"},expname:window.document.title,aLengthMenu:[5,10,25,50,100],iDisplayLength:10,bStateSave:!0,fnDrawCallback:function(b){},expFun:function(b){},loaderror:function(b){}};jQuery.extend(b,a);if(""==b.id)this.error("\u672a\u6307\u5b9atableid\u503c\u53ef\u4ee5\u4f20\u5165id\u3001class\u7b49\uff0c\u517c\u5bb9jquery\u9009\u62e9\u5668");else{var c=$(b.id);this._fn_getColParam(c,b);$.ajax({type:"get",url:b.url,data:this._params(b,c),dataType:"json",cache:!1,async:!0,timeout:1E5,success:function(a){try{"-99999"==a.state?common.alert({msg:"\u60a8\u8fd8\u672a\u767b\u9646\u6216\u767b\u9646\u5df2\u7ecf\u5931\u6548\uff0c\u8bf7\u767b\u5f55\u3002",fun:function(){window.location.href="login.html"}}):"-99998"==a.state?common.alert({msg:"\u5f88\u62b1\u6b49\uff0c\u60a8\u6ca1\u6709\u6743\u9650\u8fdb\u884c\u6b64\u64cd\u4f5c\u3002"}):lytable._loadsucceed(b,c,a)}catch(d){console.error(d),b.loaderror(d)}},error:function(a){console.error(a);b.loaderror(a)}});window.onresize=function(){lytable._fn_col_hide(c,b)}}},_fn_col_hide:function(a,b){var c=$(window).width(),g=a.data("columns");if(void 0!=g)for(var d=0;d<g.length;d++){var e=g[d][b.tableAttrParam.hidewidth],f=g[d].index;void 0!=e&&""!=e&&(lytable.log(parseInt(e)>=parseInt(c)),parseInt(e)>=parseInt(c)?(lytable.log("\u9690\u85cf\u3002\u3002\u3002"+f),a.find("thead tr th:nth-child("+(f+1)+"),tbody tr td:nth-child("+(f+1)+")").addClass("hide")):a.find("thead tr th:nth-child("+(f+1)+"),tbody tr td:nth-child("+(f+1)+")").removeClass("hide"))}},log:function(a){console.log(a)},error:function(a){console.error(a)},_params:function(a,b){for(var c=b.data("sEcho"),g=lytable._fn_getColParam(b,a),d={sEcho:void 0==c?"0":c,iColumns:g.length,iDisplayStart:0,iDisplayLength:a.iDisplayLength,iSortCol_0:1,sSortDir_0:"asc",sizelength:100},e=0;e<g.length;e++)d["mDataProp_"+e]=g[e][a.tableAttrParam.key];b.data("sEcho",void 0==c?0:c+1);jQuery.extend(d,a.param());lytable.log(d);return d},_loadsucceed:function(a,b,c){b.data("tabledata",c);var g=document.createElement("tbody");b.append(g);for(var d=b.data("columns"),e=0;e<c.data.length;e++){var f=document.createElement("tr");f.setAttribute("class",0==e%2?"two":"one");for(var m=0;m<d.length;m++){var n=document.createElement("td"),h=document.createElement("div"),q=document.createElement("div"),p=document.createElement("div"),l=document.createElement("div");l.setAttribute("class","name_");l.innerHTML=d[m].name;p.setAttribute("title",d[m].name);p.appendChild(l);p.setAttribute("class","name");q.setAttribute("class","val_");h.setAttribute("class","val");k;l=a.createRow(e,m,name,c.data[e][d[m][a.tableAttrParam.key]],c,f);if(void 0==l||""==l)l=c.data[e][d[m][a.tableAttrParam.key]];h.setAttribute("title",l);q.innerHTML=l;h.appendChild(q);n.appendChild(p);n.appendChild(h);f.appendChild(n)}g.appendChild(f);lytable.log(g)}lytable._fn_col_hide(b,a);common.log(new Date)},_fn_getColParam:function(a,b){var c=a.data("columns");void 0==c&&(c=[],a.find("thead th").each(function(a,d){d=$(this).attr("sort");var e=$(this).attr("show"),f=$(this).attr("key"),g=$(this).attr("export"),n=$(this).attr("hide"),h={};h[b.tableAttrParam.isshow]="false"==e?!1:!0;h[b.tableAttrParam.issort]="true"==d?!0:!1;h[b.tableAttrParam.isexport]="true"==g?!0:!1;h[b.tableAttrParam.key]=void 0==f?"":f;h[b.tableAttrParam.hidewidth]=void 0==n?"":n;h.index=a;h.name=$(this).text();c.push(h)}),a.data("columns",c));return c}};