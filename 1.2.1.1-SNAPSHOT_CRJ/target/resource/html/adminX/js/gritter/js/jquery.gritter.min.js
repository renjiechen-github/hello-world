'use strict';(function(c){c.gritter={};c.gritter.options={position:"",class_name:"",fade_in_speed:"medium",fade_out_speed:1E3,time:6E3};c.gritter.add=function(a){try{return e.add(a||{})}catch(d){var b="Gritter Error: "+d;"undefined"!=typeof console&&console.error?console.error(b,a):alert(b)}};c.gritter.remove=function(a,b){e.removeSpecific(a,b||{})};c.gritter.removeAll=function(a){e.stop(a||{})};var e={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'\x3cdiv class\x3d"gritter-close"\x3e\x3c/div\x3e',_tpl_title:'\x3cspan class\x3d"gritter-title"\x3e[[title]]\x3c/span\x3e',_tpl_item:'\x3cdiv id\x3d"gritter-item-[[number]]" class\x3d"gritter-item-wrapper [[item_class]]" style\x3d"display:none"\x3e\x3cdiv class\x3d"gritter-top"\x3e\x3c/div\x3e\x3cdiv class\x3d"gritter-item"\x3e[[close]][[image]]\x3cdiv class\x3d"[[class_name]]"\x3e[[title]]\x3cp\x3e[[text]]\x3c/p\x3e\x3c/div\x3e\x3cdiv style\x3d"clear:both"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"gritter-bottom"\x3e\x3c/div\x3e\x3c/div\x3e',_tpl_wrap:'\x3cdiv id\x3d"gritter-notice-wrapper"\x3e\x3c/div\x3e',add:function(a){"string"==typeof a&&(a={text:a});if(!a.text)throw'You must supply "text" parameter.';this._is_setup||this._runSetup();var b=a.title,d=a.text,g=a.image||"",m=a.sticky||!1,n=a.class_name||c.gritter.options.class_name,l=c.gritter.options.position,k=a.time||"";this._verifyWrapper();this._item_count++;var h=this._item_count,f=this._tpl_item;c(["before_open","after_open","before_close","after_close"]).each(function(b,d){e["_"+d+"_"+h]=c.isFunction(a[d])?a[d]:function(){}});this._custom_timer=0;k&&(this._custom_timer=k);k=""!=g?'\x3cimg src\x3d"'+g+'" class\x3d"gritter-image" /\x3e':"";g=""!=g?"gritter-with-image":"gritter-without-image";b=b?this._str_replace("[[title]]",b,this._tpl_title):"";f=this._str_replace("[[title]] [[text]] [[close]] [[image]] [[number]] [[class_name]] [[item_class]]".split(" "),[b,d,this._tpl_close,k,this._item_count,g,n],f);if(!1===this["_before_open_"+h]())return!1;c("#gritter-notice-wrapper").addClass(l).append(f);b=c("#gritter-item-"+this._item_count);b.fadeIn(this.fade_in_speed,function(){e["_after_open_"+h](c(this))});m||this._setFadeTimer(b,h);c(b).bind("mouseenter mouseleave",function(a){"mouseenter"==a.type?m||e._restoreItemIfFading(c(this),h):m||e._setFadeTimer(c(this),h);e._hoverState(c(this),a.type)});c(b).find(".gritter-close").click(function(){e.removeSpecific(h,{},null,!0)});return h},_countRemoveWrapper:function(a,b,d){b.remove();this["_after_close_"+a](b,d);0==c(".gritter-item-wrapper").length&&c("#gritter-notice-wrapper").remove()},_fade:function(a,b,d,c){d=d||{};var g="undefined"!=typeof d.fade?d.fade:!0;d=d.speed||this.fade_out_speed;this["_before_close_"+b](a,c);c&&a.unbind("mouseenter mouseleave");g?a.animate({opacity:0},d,function(){a.animate({height:0},300,function(){e._countRemoveWrapper(b,a,c)})}):this._countRemoveWrapper(b,a)},_hoverState:function(a,b){"mouseenter"==b?(a.addClass("hover"),a.find(".gritter-close").show()):(a.removeClass("hover"),a.find(".gritter-close").hide())},removeSpecific:function(a,b,d,g){d||(d=c("#gritter-item-"+a));this._fade(d,a,b||{},g)},_restoreItemIfFading:function(a,b){clearTimeout(this["_int_id_"+b]);a.stop().css({opacity:"",height:""})},_runSetup:function(){for(opt in c.gritter.options)this[opt]=c.gritter.options[opt];this._is_setup=1},_setFadeTimer:function(a,b){this["_int_id_"+b]=setTimeout(function(){e._fade(a,b)},this._custom_timer?this._custom_timer:this.time)},stop:function(a){var b=c.isFunction(a.before_close)?a.before_close:function(){},d=c.isFunction(a.after_close)?a.after_close:function(){};a=c("#gritter-notice-wrapper");b(a);a.fadeOut(function(){c(this).remove();d()})},_str_replace:function(a,b,d,c){var e,g,l,k,h;a=[].concat(a);b=[].concat(b);var f=d,p=b instanceof Array,q=f instanceof Array,f=[].concat(f);c&&(this.window[c]=0);d=0;for(k=f.length;d<k;d++)if(""!==f[d])for(e=0,h=a.length;e<h;e++)g=f[d]+"",l=p?void 0!==b[e]?b[e]:"":b[0],f[d]=g.split(a[e]).join(l),c&&f[d]!==g&&(this.window[c]+=(g.length-f[d].length)/a[e].length);return q?f:f[0]},_verifyWrapper:function(){0==c("#gritter-notice-wrapper").length&&c("body").append(this._tpl_wrap)}}})(jQuery);