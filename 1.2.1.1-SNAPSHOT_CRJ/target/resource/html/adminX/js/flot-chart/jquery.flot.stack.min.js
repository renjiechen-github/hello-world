'use strict';(function(u){u.plot.plugins.push({init:function(u){u.hooks.processDatapoints.push(function(b,m,v){if(null!=m.stack&&!1!==m.stack){var h;b=b.getData();for(var f=null,g=0;g<b.length&&m!=b[g];++g)b[g].stack==m.stack&&(f=b[g]);if(h=f){b=v.pointsize;f=v.points;g=h.datapoints.pointsize;h=h.datapoints.points;var c=[],q,a,r,k,p,t,w=m.lines.show;k=m.bars.horizontal;var u=2<b&&(k?v.format[2].x:v.format[2].y);m=w&&m.lines.steps;r=!0;for(var x=k?1:0,n=k?0:1,e=0,l=0,d;!(e>=f.length);){d=c.length;if(null==f[e]){for(a=0;a<b;++a)c.push(f[e+a]);e+=b}else if(l>=h.length){if(!w)for(a=0;a<b;++a)c.push(f[e+a]);e+=b}else if(null==h[l]){for(a=0;a<b;++a)c.push(null);r=!0;l+=g}else{q=f[e+x];a=f[e+n];k=h[l+x];p=h[l+n];t=0;if(q==k){for(a=0;a<b;++a)c.push(f[e+a]);c[d+n]+=p;t=p;e+=b;l+=g}else if(q>k){if(w&&0<e&&null!=f[e-b]){r=a+(f[e-b+n]-a)*(k-q)/(f[e-b+x]-q);c.push(k);c.push(r+p);for(a=2;a<b;++a)c.push(f[e+a]);t=p}l+=g}else{if(r&&w){e+=b;continue}for(a=0;a<b;++a)c.push(f[e+a]);w&&0<l&&null!=h[l-g]&&(t=p+(h[l-g+n]-p)*(q-k)/(h[l-g+x]-k));c[d+n]+=t;e+=b}r=!1;d!=c.length&&u&&(c[d+2]+=t)}if(m&&d!=c.length&&0<d&&null!=c[d]&&c[d]!=c[d-b]&&c[d+1]!=c[d-b+1]){for(a=0;a<b;++a)c[d+b+a]=c[d+a];c[d+1]=c[d-b+1]}}v.points=c}}})},options:{series:{stack:null}},name:"stack",version:"1.2"})})(jQuery);