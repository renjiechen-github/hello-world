'use strict';(function(){function d(e,c,g){var a=d.resolve(e);if(null==a)throw g=g||e,c=c||"root",a=Error('Failed to require "'+g+'" from "'+c+'"'),a.path=g,a.parent=c,a.require=!0,a;c=d.modules[a];c.exports||(c.exports={},c.client=c.component=!0,c.call(this,c.exports,d.relative(a),c));return c.exports}var l=Object.prototype.hasOwnProperty;d.modules={};d.aliases={};d.resolve=function(e){for(var c=e+"/index.js",g=[e,e+".js",e+".json",e+"/index.js",e+"/index.json"],a=0;a<g.length;a++)if(e=g[a],l.call(d.modules,e))return e;if(l.call(d.aliases,c))return d.aliases[c]};d.normalize=function(e,c){var d=[];if("."!=c.charAt(0))return c;e=e.split("/");c=c.split("/");for(var a=0;a<c.length;++a)".."==c[a]?e.pop():"."!=c[a]&&""!=c[a]&&d.push(c[a]);return e.concat(d).join("/")};d.register=function(e,c){d.modules[e]=c};d.alias=function(e,c){if(!l.call(d.modules,e))throw Error('Failed to alias "'+e+'", it does not exist');d.aliases[c]=e};d.relative=function(e){function c(a){var u=c.resolve(a);return d(u,e,a)}var g=d.normalize(e,"..");c.resolve=function(a){if("."!=a.charAt(0)){var c=e.split("/"),f;a:{for(f=c.length;f--;)if("deps"===c[f])break a;f=-1}(f+=1)||(f=0);return a=c.slice(0,f+1).join("/")+"/deps/"+a}return d.normalize(g,a)};c.exists=function(a){return l.call(d.modules,c.resolve(a))};return c};d.register("component-emitter/index.js",function(d,c,g){function a(c){if(c){for(var f in a.prototype)c[f]=a.prototype[f];return c}}g.exports=a;a.prototype.on=function(c,a){this._callbacks=this._callbacks||{};(this._callbacks[c]=this._callbacks[c]||[]).push(a);return this};a.prototype.once=function(c,a){function f(){d.off(c,f);a.apply(this,arguments)}var d=this;this._callbacks=this._callbacks||{};a._off=f;this.on(c,f);return this};a.prototype.off=a.prototype.removeListener=a.prototype.removeAllListeners=function(c,a){this._callbacks=this._callbacks||{};var f=this._callbacks[c];if(!f)return this;if(1==arguments.length)return delete this._callbacks[c],this;var d=f.indexOf(a._off||a);~d&&f.splice(d,1);return this};a.prototype.emit=function(c){this._callbacks=this._callbacks||{};var a=[].slice.call(arguments,1),d=this._callbacks[c];if(d)for(var d=d.slice(0),e=0,g=d.length;e<g;++e)d[e].apply(this,a);return this};a.prototype.listeners=function(c){this._callbacks=this._callbacks||{};return this._callbacks[c]||[]};a.prototype.hasListeners=function(c){return!!this.listeners(c).length}});d.register("dropzone/index.js",function(d,c,g){g.exports=c("./lib/dropzone.js")});d.register("dropzone/lib/dropzone.js",function(d,c,g){(function(){var a,d,f,e,l={}.hasOwnProperty,v=function(c,a){function b(){this.constructor=c}for(var k in a)l.call(a,k)&&(c[k]=a[k]);b.prototype=a.prototype;c.prototype=new b;c.__super__=a.prototype;return c},w=[].slice;f="undefined"!==typeof jQuery&&null!==jQuery?jQuery:c("jquery");a=function(c){function a(b,c){var k;this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,"");this.element=f(b);if(1!==this.element.length)throw Error("You can only instantiate dropzone on a single element.");if(this.element.data("dropzone"))throw Error("Dropzone already attached.");this.element.data("dropzone",this);b=this.element.attr("id");b=null!=(k=b?a.options[d(b)]:void 0)?k:{};this.elementTagName=this.element.get(0).tagName;this.options=function(){var b,a,c,k,d,e,f;k=arguments[0];c=2<=arguments.length?w.call(arguments,1):[];e=0;for(f=c.length;e<f;e++)for(b in a=c[e],a)d=a[b],k[b]=d;return k}({},this.defaultOptions,b,null!=c?c:{});null==this.options.url&&(this.options.url=this.element.attr("action"));if(!this.options.url)throw Error("No URL provided.");this.previewsContainer=this.options.previewsContainer?f(this.options.previewsContainer):this.element;this.init()}v(a,c);a.prototype.version="1.3.10";a.prototype.events="drop dragstart dragend dragenter dragover dragleave selectedfiles addedfile removedfile thumbnail error processingfile uploadprogress sending success complete reset".split(" ");a.prototype.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];a.prototype.defaultOptions={url:null,parallelUploads:2,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:2,thumbnailWidth:100,thumbnailHeight:100,params:{},clickable:!0,enqueueForUpload:!0,previewsContainer:null,accept:function(b,a){return a()},fallback:function(){this.element.addClass("browser-not-supported");this.element.find(".message").removeClass("default");this.element.find(".message span").html("Your browser does not support drag'n'drop file uploads.");this.element.append("Please use the fallback form below to upload your files like in the olden days.\x3c/p\x3e");return this.element.append(this.getFallbackForm())},drop:function(b){return this.element.removeClass("drag-hover")},dragstart:f.noop,dragend:function(b){return this.element.removeClass("drag-hover")},dragenter:function(b){return this.element.addClass("drag-hover")},dragover:function(b){return this.element.addClass("drag-hover")},dragleave:function(b){return this.element.removeClass("drag-hover")},selectedfiles:function(b){if(this.element.is(this.previewsContainer))return this.element.addClass("started")},reset:function(){return this.element.removeClass("started")},addedfile:function(b){b.previewTemplate=f(this.options.previewTemplate);this.previewsContainer.append(b.previewTemplate);b.previewTemplate.find(".filename span").text(b.name);return b.previewTemplate.find(".details").append(f('\x3cdiv class\x3d"size"\x3e'+this.filesize(b.size)+"\x3c/div\x3e"))},removedfile:function(b){return b.previewTemplate.remove()},thumbnail:function(b,a){b.previewTemplate.removeClass("file-preview").addClass("image-preview");return b.previewTemplate.find(".details").append(f('\x3cimg alt\x3d"'+b.name+'" src\x3d"'+a+'"/\x3e'))},error:function(b,a){b.previewTemplate.addClass("error");return b.previewTemplate.find(".error-message span").text(a)},processingfile:function(b){return b.previewTemplate.addClass("processing")},uploadprogress:function(b,a){return b.previewTemplate.find(".progress .upload").css({width:""+a+"%"})},sending:f.noop,success:function(b){return b.previewTemplate.addClass("success")},complete:f.noop,previewTemplate:'\x3cdiv class\x3d"preview file-preview"\x3e\n  \x3cdiv class\x3d"details"\x3e\n   \x3cdiv class\x3d"filename"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\n  \x3c/div\x3e\n  \x3cdiv class\x3d"progress"\x3e\x3cspan class\x3d"upload"\x3e\x3c/span\x3e\x3c/div\x3e\n  \x3cdiv class\x3d"success-mark"\x3e\x3cspan\x3e\u2714\x3c/span\x3e\x3c/div\x3e\n  \x3cdiv class\x3d"error-mark"\x3e\x3cspan\x3e\u2718\x3c/span\x3e\x3c/div\x3e\n  \x3cdiv class\x3d"error-message"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\n\x3c/div\x3e'};a.prototype.init=function(){var b,a,c,d,e,t,h=this;"form"===this.elementTagName&&"multipart/form-data"!==this.element.attr("enctype")&&this.element.attr("enctype","multipart/form-data");this.element.hasClass("dropzone")&&0===this.element.find(".message").length&&this.element.append(f('\x3cdiv class\x3d"default message"\x3e\x3cspan\x3eDrop files here to upload\x3c/span\x3e\x3c/div\x3e'));b=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData)for(e=this.blacklistedBrowsers,c=0,d=e.length;c<d;c++)a=e[c],a.test(navigator.userAgent)&&(b=!1);else b=!1;if(!b)return this.options.fallback.call(this);this.options.clickable&&(this.element.addClass("clickable"),this.hiddenFileInput=f('\x3cinput type\x3d"file" multiple /\x3e'),this.element.click(function(b){b=f(b.target);if(b.is(h.element)||b.is(h.element.find(".message")))return h.hiddenFileInput.click()}),this.hiddenFileInput.change(function(){var b;b=h.hiddenFileInput.get(0).files;h.emit("selectedfiles",b);if(b.length)return h.handleFiles(b)}));this.files=[];this.filesQueue=[];this.filesProcessing=[];this.URL=null!=(t=window.URL)?t:window.webkitURL;return this.setupEventListeners()};a.prototype.getFallbackForm=function(){var b;b=f('\x3cdiv class\x3d"fallback-elements"\x3e\x3cinput type\x3d"file" name\x3d"'+this.options.paramName+'" multiple\x3d"multiple" /\x3e\x3cbutton type\x3d"submit"\x3eUpload!\x3c/button\x3e\x3c/div\x3e');"FORM"!==this.elementTagName?b=f('\x3cform action\x3d"'+this.options.url+'" enctype\x3d"multipart/form-data" method\x3d"post"\x3e\x3c/form\x3e').append(b):(this.element.attr("enctype")||this.element.attr("enctype","multipart/form-data"),this.element.attr("method")||this.element.attr("method","post"));return b};a.prototype.setupEventListeners=function(){var b,a,c,d,e,f=this;e=this.events;c=0;for(d=e.length;c<d;c++)b=e[c],this.on(b,this.options[b]);a=function(b){b.stopPropagation();return b.preventDefault()};this.element.on("dragstart.dropzone",function(b){return f.emit("dragstart",b)});this.element.on("dragenter.dropzone",function(b){a(b);return f.emit("dragenter",b)});this.element.on("dragover.dropzone",function(b){a(b);return f.emit("dragover",b)});this.element.on("dragleave.dropzone",function(b){return f.emit("dragleave",b)});this.element.on("drop.dropzone",function(b){a(b);f.drop(b);return f.emit("drop",b)});return this.element.on("dragend.dropzone",function(b){return f.emit("dragend",b)})};a.prototype.removeEventListeners=function(){return this.element.off(".dropzone")};a.prototype.disable=function(){this.removeEventListeners();this.files=[];this.filesProcessing=[];return this.filesQueue=[]};a.prototype.filesize=function(b){var a;1E11<=b?(b/=1E11,a="TB"):1E8<=b?(b/=1E8,a="GB"):1E5<=b?(b/=1E5,a="MB"):100<=b?(b/=100,a="KB"):(b*=10,a="b");return"\x3cstrong\x3e"+Math.round(b)/10+"\x3c/strong\x3e "+a};a.prototype.drop=function(b){if(b.originalEvent.dataTransfer&&(b=b.originalEvent.dataTransfer.files,this.emit("selectedfiles",b),b.length))return this.handleFiles(b)};a.prototype.handleFiles=function(b){var a,c,d,e;e=[];c=0;for(d=b.length;c<d;c++)a=b[c],e.push(this.addFile(a));return e};a.prototype.accept=function(b,a){return b.size>1048576*this.options.maxFilesize?a("File is too big ("+Math.round(b.size/1024/10.24)/100+"MB). Max filesize: "+this.options.maxFilesize+"MB"):this.options.accept.call(this,b,a)};a.prototype.addFile=function(b){var a=this;this.files.push(b);this.emit("addedfile",b);this.options.createImageThumbnails&&b.type.match(/image.*/)&&b.size<=1048576*this.options.maxThumbnailFilesize&&this.createThumbnail(b);return this.accept(b,function(c){if(c)return a.errorProcessing(b,c);if(a.options.enqueueForUpload)return a.filesQueue.push(b),a.processQueue()})};a.prototype.removeFile=function(b){if(b.processing)throw Error("Can't remove file currently processing");this.files=e(this.files,b);this.filesQueue=e(this.filesQueue,b);this.emit("removedfile",b);if(0===this.files.length)return this.emit("reset")};a.prototype.createThumbnail=function(b){var a,c=this;a=new FileReader;a.onload=function(){var d;d=new Image;d.onload=function(){var a,e,f,k,g,n,m,q;a=document.createElement("canvas");e=a.getContext("2d");g=d.width;f=d.height;a.width=c.options.thumbnailWidth;a.height=c.options.thumbnailHeight;q=a.width;n=a.height;k=d.width/d.height;m=a.width/a.height;d.height<a.height||d.width<a.width?(n=f,q=g):k>m?(f=d.height,g=f*m):(g=d.width,f=g/m);e.drawImage(d,(d.width-g)/2,(d.height-f)/2,g,f,(a.width-q)/2,(a.height-n)/2,q,n);a=a.toDataURL("image/png");return c.emit("thumbnail",b,a)};return d.src=a.result};return a.readAsDataURL(b)};a.prototype.processQueue=function(){var b,a;a=this.options.parallelUploads;for(b=this.filesProcessing.length;b<a&&this.filesQueue.length;)this.processFile(this.filesQueue.shift()),b++};a.prototype.processFile=function(b){this.filesProcessing.push(b);b.processing=!0;this.emit("processingfile",b);return this.uploadFile(b)};a.prototype.uploadFile=function(b){var a,c,d,e,g,h,l,r,p=this;g=new XMLHttpRequest;g.open("POST",this.options.url,!0);c=function(){return p.errorProcessing(b,g.responseText||"Server responded with "+g.status+" code.")};g.onload=function(a){var d;if(200!==g.status)return c();p.emit("uploadprogress",b,100);d=g.responseText;g.getResponseHeader("content-type")&&~g.getResponseHeader("content-type").indexOf("application/json")&&(d=JSON.parse(d));return p.finished(b,d,a)};g.onerror=function(){return c()};(null!=(a=g.upload)?a:g).onprogress=function(a){return p.emit("uploadprogress",b,Math.max(0,Math.min(100,a.loaded/a.total*100)))};g.setRequestHeader("Accept","application/json");g.setRequestHeader("Cache-Control","no-cache");g.setRequestHeader("X-Requested-With","XMLHttpRequest");g.setRequestHeader("X-File-Name",b.name);a=new FormData;if(this.options.params)for(d in h=this.options.params,h)e=h[d],a.append(d,e);this.elementTagName="FORM";r=this.element.find("input, textarea, select, button");h=0;for(l=r.length;h<l;h++)e=r[h],d=f(e),d.attr("name"),d.attr("type")&&"checkbox"===d.attr("type").toLowerCase()&&!e.checked||a.append(d.attr("name"),d.val());this.emit("sending",b,g,a);a.append(this.options.paramName,b);return g.send(a)};a.prototype.finished=function(a,c,d){this.filesProcessing=e(this.filesProcessing,a);a.processing=!1;this.processQueue();this.emit("success",a,c,d);this.emit("finished",a,c,d);return this.emit("complete",a)};a.prototype.errorProcessing=function(a,c){this.filesProcessing=e(this.filesProcessing,a);a.processing=!1;this.processQueue();this.emit("error",a,c);return this.emit("complete",a)};return a}("undefined"!==typeof Emitter&&null!==Emitter?Emitter:c("emitter"));a.options={};e=function(a,c){var b,d,e,f;f=[];d=0;for(e=a.length;d<e;d++)b=a[d],b!==c&&f.push(b);return f};d=function(a){return a.replace(/[\-_](\w)/g,function(a){return a[1].toUpperCase()})};f.fn.dropzone=function(c){return this.each(function(){return new a(this,c)})};f(function(){return f(".dropzone").dropzone()});"undefined"!==typeof g&&null!==g?g.exports=a:window.Dropzone=a}).call(this)});d.alias("component-emitter/index.js","dropzone/deps/emitter/index.js");"object"==typeof exports?module.exports=d("dropzone"):"function"==typeof define&&define.amd?define(d("dropzone")):window.Dropzone=d("dropzone")})();