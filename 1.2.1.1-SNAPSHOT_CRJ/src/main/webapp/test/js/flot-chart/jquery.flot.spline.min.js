'use strict';(function(p){function u(f,b,a,c,l,d,e){var g=Math.pow,m=Math.sqrt,k;k=m(g(a-f,2)+g(c-b,2));g=m(g(l-a,2)+g(d-c,2));k=e*k/(k+g);e-=k;return[a+k*(f-l),c+k*(b-d),a-e*(f-l),c-e*(b-d)]}function r(f,b,a,c){if(void 0===b||"bezier"!==b&&"quadratic"!==b)b="quadratic";b+="CurveTo";0==m.length?m.push([a[0],a[1],c.concat(a.slice(2)),b]):"quadraticCurveTo"==b&&2==a.length?(c=c.slice(0,2).concat(a),m.push([a[0],a[1],c,b])):m.push([a[2],a[3],c.concat(a.slice(2)),b])}function v(f,b,a){if(!0===a.splines.show){var c=[],l=a.splines.tension||.5,d,e,g,q=a.datapoints.points,k=a.datapoints.pointsize,t=f.getPlotOffset(),h=q.length,n=[];m=[];if(4>h/k)p.extend(a.lines,a.splines);else{for(d=0;d<h;d+=k)e=q[d],g=q[d+1],null==e||e<a.xaxis.min||e>a.xaxis.max||g<a.yaxis.min||g>a.yaxis.max||n.push(a.xaxis.p2c(e)+t.left,a.yaxis.p2c(g)+t.top);h=n.length;for(d=0;d<h-2;d+=2)c=c.concat(u.apply(this,n.slice(d,d+6).concat([l])));b.save();b.strokeStyle=a.color;b.lineWidth=a.splines.lineWidth;r(b,"quadratic",n.slice(0,4),c.slice(0,2));for(d=2;d<h-3;d+=2)r(b,"bezier",n.slice(d,d+4),c.slice(2*d-2,2*d+2));r(b,"quadratic",n.slice(h-2,h),[c[2*h-10],c[2*h-9],n[h-4],n[h-3]]);c=m;f=f.height()+10;l=a.splines.fill;a=p.color.parse(a.color);a.a="number"==typeof l?l:.3;a.normalize();a=a.toString();b.beginPath();b.moveTo(c[0][0],c[0][1]);d=c.length;for(e=0;e<d;e++)b[c[e][3]].apply(b,c[e][2]);b.stroke();b.lineWidth=0;b.lineTo(c[d-1][0],f);b.lineTo(c[0][0],f);b.closePath();!1!==l&&(b.fillStyle=a,b.fill());b.restore()}}}var m=[];p.plot.plugins.push({init:function(f){f.hooks.drawSeries.push(v)},options:{series:{splines:{show:!1,lineWidth:2,tension:.5,fill:!1}}},name:"spline",version:"0.8.2"})})(jQuery);