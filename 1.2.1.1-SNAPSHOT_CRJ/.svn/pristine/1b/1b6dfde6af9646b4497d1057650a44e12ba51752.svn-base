'use strict';(function(){function a(){"relative"==jQuery(".searchform").css("position")?jQuery(".searchform").insertBefore(".left-side-inner .logged-user"):jQuery(".searchform").insertBefore(".menu-right")}$("html").niceScroll({autohidemode:!1,smoothscroll:!0,bouncescroll:!0,styler:"fb",cursorcolor:"#65cea7",cursorwidth:"16",cursorborderradius:"5px",background:"#424f63",spacebarenabled:!1,cursorborder:"0",zindex:"1000"});$(".left-side").niceScroll({bouncescroll:!0,styler:"fb",cursorcolor:"#65cea7",cursorwidth:"3",cursorborderradius:"0px",background:"#424f63",spacebarenabled:!0,cursorborder:"0"});$(".left-side").getNiceScroll();$("body").hasClass("left-side-collapsed")&&$(".left-side").getNiceScroll().hide();jQuery(".toggle-btn").click(function(){$(".sidebar-menu").toggleClass("sidebar-mini");$(".main-menu").find(".openable").removeClass("open");$(".main-menu").find(".submenu").removeAttr("style");$(".left-side").getNiceScroll().hide();$("body").hasClass("left-side-collapsed")&&$(".left-side").getNiceScroll().hide();var a=jQuery("body"),b=a.css("position");$(".dropdown").addClass("left-side-inner");$(".dropdown li.selected\x3ea").click();"relative"!=b?a.hasClass("left-side-collapsed")?(a.removeClass("left-side-collapsed chat-view"),jQuery(".custom-nav li.active ul").css({display:"block"}),jQuery(this).removeClass("menu-collapsed")):(a.addClass("left-side-collapsed"),jQuery(".custom-nav ul").attr("style",""),jQuery(this).addClass("menu-collapsed")):(a.hasClass("left-side-show")?a.removeClass("left-side-show"):a.addClass("left-side-show"),mainContentHeightAdjust())});a();jQuery(window).resize(function(){"relative"==jQuery("body").css("position")?jQuery("body").removeClass("left-side-collapsed"):jQuery("body").css({left:"",marginRight:""});a()});$(".panel .tools .fa-chevron-down").live("click",function(){var a=$(this).parents(".panel").children(".panel-body").first();$(this).removeClass("fa-chevron-down").addClass("fa-chevron-up");a.slideUp(200)});$(".panel .tools .fa-chevron-up").live("click",function(){var a=$(this).parents(".panel").children(".panel-body").first();$(this).removeClass("fa-chevron-up").addClass("fa-chevron-down");a.slideDown(200)});$(".todo-check label").live("click",function(){$(this).parents("li").children(".todo-title").toggleClass("line-through")});$("#sortable-todo").sortable();$(".panel .tools .fa-times").live("click",function(){$(this).parents(".panel").parent().remove()});$(".tooltips").tooltip();$(".popovers").popover()})(jQuery);var index={changeFun:function(){return!0},loadMenuFun:null,user:null,init:function(){index.loadTime();index.loadUser();$(window).resize(function(){});index.loadSearchEvent();$(".user .sign-out").click(function(){index.loginout()});index.modifyPass();index.loadMenuEventNew();$(".notDefMenu").die("click");$(".notDefMenu").live("click",function(a){a='\x3cdiv class\x3d"table_menu" \x3e\x3cul class\x3d"ulClass"\x3e'+$(this).find("ul").html()+"\x3c/ul\x3e\x3c/div\x3e";$("body").append(a);a=$(".table_menu").width();$(".table_menu").height();var e=$(this).width(),b=$(this).offset().top,g=$(this).offset().left;$(".table_menu").css({left:g-a+e,top:b+34})})},loadMenuNewSim:function(a){for(var e=a.length,b="",g=0;g<e;g++){var c=a[g];if(1==c.menu_level){b+='\x3cli class\x3d"openable bg-palette'+(g%4+1)+'"\x3e';if(void 0==c.menu_ico||""==c.menu_ico)c.menu_ico="fa-file-text-o";b+='\x3ca href\x3d"#" url\x3d"'+(null!=c.menu_url?c.menu_url:"#")+'" menu_id\x3d"'+c.menu_id+'"\x3e';b+='\x3cspan class\x3d"menu-content block"\x3e';b+='\x3cspan class\x3d"menu-icon"\x3e\x3ci class\x3d"block fa '+c.menu_ico+' fa-lg"\x3e\x3c/i\x3e\x3c/span\x3e';b+='\x3cspan class\x3d"text m-left-sm"\x3e'+c.menu_name+"\x3c/span\x3e";"1"==c.isnext&&(b+='\x3cspan class\x3d"submenu-icon"\x3e\x3c/span\x3e');b+="\x3c/span\x3e";b+='\x3cspan class\x3d"menu-content-hover block"\x3e'+c.menu_name.charAt(0)+"\x3c/span\x3e\x3c/a\x3e";if("1"==c.isnext){for(var b=b+'\x3cul class\x3d"submenu"\x3e',h=0;h<e;h++){var d=a[h];if(2==d.menu_level&&d.super_id==c.menu_id)if(b="1"==d.isnext?b+'\x3cli class\x3d"openable"\x3e':b+"\x3cli\x3e",b+='\x3ca menu_id\x3d"'+d.menu_id+'"  href\x3d"#" url\x3d"'+(null!=d.menu_url?d.menu_url:"#")+'"\x3e\x3cspan class\x3d"submenu-label"\x3e'+d.menu_name+"\x3c/span\x3e",1==d.isnext&&(b+='\x3cspan class\x3d"submenu-icon"\x3e\x3c/span\x3e'),b+="\x3c/a\x3e",1==d.isnext){for(var b=b+'\x3cul class\x3d"submenu third-level"\x3e',k=0;k<e;k++){var f=a[k];3==f.menu_level&&f.super_id==d.menu_id&&(b="1"==f.isnext?b+'\x3cli class\x3d"openable"\x3e':b+"\x3cli\x3e",b+='\x3ca  menu_id\x3d"'+f.menu_id+'" href\x3d"#" url\x3d"'+(null!=f.menu_url?d.menu_url:"#")+'"\x3e\x3cspan class\x3d"submenu-label"\x3e'+f.menu_name+"\x3c/span\x3e",1==f.isnext&&(b+='\x3cspan class\x3d"submenu-icon"\x3e\x3c/span\x3e'),b+="\x3c/a\x3e\x3c/li\x3e")}b+="\x3c/ul\x3e"}else b+="\x3c/li\x3e"}b+="\x3c/ul\x3e"}else b+="\x3c/li\x3e"}}$(".accordion").append(b);index.loadMenuEventNew()},loadMenuEventNew:function(){$(".table_menu").remove();$(".sidebar-menu .openable  a").click(function(){if($("aside").hasClass("sidebar-mini")&&240!=$(".sidebar-menu.sidebar-mini").width())a=$(this).attr("url"),"#"!=a&&index.openMenuNew(this,a);else{var a=$(this).attr("url");"#"!=a&&index.openMenuNew(this,a);$(this).parent().children(".submenu").is(":hidden")?($(this).parent().siblings().removeClass("open").children(".submenu").slideUp(200),$(this).parent().addClass("open").children(".submenu").slideDown(200)):$(this).parent().removeClass("open").children(".submenu").slideUp(200)}return!1});$(".sidebar-menu").hasClass("sidebar-mini")||$(".openable.open").children(".submenu").slideDown(200)},loadmenuObj:null,openMenuNew:function(a,e,b,g){$(".table_menu").remove();if(index.changeFun()){common.load.load("\u83dc\u5355\u6253\u5f00\u4e2d");index.addStateInfo("");$(".sticky-header").data("menuurl",e);$(".sidebar-menu li").removeClass("active");$(a).parents("li").addClass("active");$(".datetimepicker").remove();$(".daterangepicker").remove();var c=$(a).attr("menu_id");null==e||""==e.trim()?common.load.hide("","\u6253\u5f00\u6210\u529f"):""!=e&&null!=e&&common.ajax({url:"/"+e,dataType:"html",loadfun:function(b,d){if(b){common.load.hide("","\u6253\u5f00\u6210\u529f");$("html").getNiceScroll(0).doScrollTop(0,0);$(".wrapper").html(d);if(null==a)$(".homehead_ .breadcrumb").html("\x3cli class\x3d'active' \x3e\u94f6\u57ce\u5343\u4e07\u95f4\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf\x3c/li\x3e");else{b=$(a).find("span").text();0==window.location.host.indexOf("localhost")&&(b+="--"+e);d=$(a).parent().parent().parent().find("a").first().find(".text").text();var k=$(a).parent().parent().parent().parent().parent().find("a").first().find(".text").text(),f="";""!=k&&(f+="\x3cli\x3e"+k+"\x3c/li\x3e");""!=d&&(f+="\x3cli\x3e"+d+"\x3c/li\x3e");""!=b&&(f+='\x3cli class\x3d"active"\x3e'+b+"\x3c/li\x3e");$(".sticky-header").data("menutitle",f);$(".homehead_ .breadcrumb").html(f);index.openobj=e;index.menu_id=c}"function"==typeof g&&g()}else common.load.hide("zoomOut","\u6253\u5f00\u5931\u8d25"),common.alert({msg:"\u9875\u9762\u52a0\u8f7d\u5931\u8d25\uff0c\u9519\u8bef\u4fe1\u606f\uff1a"+d,fun:function(){common.load.hide("zoomOut")}}),index.loadMenuFun=null}})}},loadMenuEvent:function(){$(".dropdown").tendina({animate:!0,speed:500,openCallback:function(a){a=$(a).find("a").first();a.hasClass("more")&&a.attr("style","background-image:url(/html/adminX/images/minus.png);")},closeCallback:function(a){a=$(a).find("a").first();a.hasClass("more")&&a.attr("style","background-image:url(/html/adminX/images/plus-white.png);")}});$(".dropdown").attr("style","opacity\uff1a1")},loadSearchEvent:function(){$(".yc_seach").live("click",function(){var a=$(this).attr("table"),e=$("#"+a).data("table");table.addkRedraw(a);e.fnDraw()});$(".yc_seach").parents(".panel-seach").find("input").live("keydown keyup",function(a){if("13"==a.which&&"keyup"==a.type)return common.log("11111"),$(".wrapper .yc_seach").click(),!1})},loginout:function(){common.alert({msg:"\u786e\u5b9a\u8981\u9000\u51fa\u5417\uff1f",confirm:!0,fun:function(a){a&&(common.load.load("\u6b63\u5728\u767b\u51fa\u4e2d..."),common.ajax({url:common.root+"/login/loginOut.do",dataType:"json",loadfun:function(a,b){a?1==b.state&&common.alert({msg:"\u611f\u8c22\u60a8\u7684\u4f7f\u7528\uff0c\u4e0b\u6b21\u518d\u89c1\u3002",fun:function(){window.location.href="/html/login.html"}}):common.alert({msg:common.msg.error})}}))}})},loadTime:function(){setInterval(function(){var a=new Date,e=a.getDate(),b=a.getMonth(),g=a.getFullYear(),c="\u661f\u671f\u65e5 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d".split(" ")[a.getDay()],h=a.getHours(),d=a.getMinutes(),a=a.getSeconds(),e=g+"\u5e74"+(b+1)+"\u6708"+e+"\u65e5  "+c+"  "+h+":"+d+":"+a;$(".index_time").html(e)},1E3)},loadUser:function(){var a=this;common.ajax({url:common.root+"/login/loadUser.do",dataType:"json",cache:!0,loadfun:function(e,b){e?"-2"==b.state?common.alert({msg:"\u60a8\u8fd8\u672a\u767b\u5f55\uff0c\u8bf7\u5148\u767b\u5f55\u3002",fun:function(){window.location.href="/html/login.html"}}):"1"==b.state?(a.user=b.user,a.setUser(a),a.loadMenuNewSim(b.menu),common.load.hide("","\u52a0\u8f7d\u6210\u529f"),index.openMenuNew(null,"html/home.html")):common.alert({msg:common.msg.error}):common.alert({msg:common.msg.error})}})},setUser:function(a){$(".index_user").text(a.user.name)},loadMenuNew:function(a){for(var e=a.length,b="",g=0;g<e;g++){var c=a[g];if(1==c.menu_level){if(void 0==c.menu_ico||""==c.menu_ico)c.menu_ico="fa-file-text-o";b+='\x3cli\x3e\x3ca menu_id\x3d"'+c.menu_id+'" class\x3d"'+("1"==c.isnext?"more":"")+'" '+(null!=c.menu_url?"onclick\x3d\"index.openMenu(this,'"+c.menu_url+"');return false;\"":"")+'  href\x3d"#"\x3e\x3ci class\x3d"fa '+c.menu_ico+'"\x3e\x3c/i\x3e\x3cspan\x3e'+c.menu_name+"\x3c/span\x3e\x3c/a\x3e";if("1"!=c.isnext)b+="\x3c/li\x3e";else{for(var b=b+"\x3cul\x3e",h=0;h<e;h++){var d=a[h];if(2==d.menu_level&&d.super_id==c.menu_id){if(void 0==d.menu_ico||""==d.menu_ico)d.menu_ico="fa-file-text-o";b+='\x3cli\x3e\x3ca menu_id\x3d"'+d.menu_id+'" class\x3d"'+("1"==d.isnext?"more":"")+'" '+(null!=d.menu_url?"onclick\x3d\"index.openMenu(this,'"+d.menu_url+"');return false;\"":"")+'  href\x3d"#"\x3e\x3ci class\x3d"fa fa-null"\x3e\x3c/i\x3e\x3ci class\x3d"fa '+d.menu_ico+'"\x3e\x3c/i\x3e\x3cspan\x3e'+d.menu_name+"\x3c/span\x3e\x3c/a\x3e";if("1"!=d.isnext)b+="\x3c/li\x3e";else{for(var b=b+"\x3cul\x3e",k=0;k<e;k++){var f=a[k];if(3==f.menu_level&&f.super_id==d.menu_id){if(void 0==f.menu_ico||""==f.menu_ico)f.menu_ico="fa-file-text-o";b+='\x3cli\x3e\x3ca menu_id\x3d"'+f.menu_id+'" class\x3d"'+("1"==f.isnext?"more":"")+'" '+(null!=f.menu_url?"onclick\x3d\"index.openMenu(this,'"+f.menu_url+"');return false;\"":"")+'  href\x3d"#"\x3e\x3ci class\x3d"fa fa-null"\x3e\x3c/i\x3e\x3ci class\x3d"fa fa-null"\x3e\x3c/i\x3e\x3ci class\x3d"fa '+f.menu_ico+'"\x3e\x3c/i\x3e\x3cspan\x3e'+f.menu_name+"\x3c/span\x3e\x3c/a\x3e";"1"!=f.isnext&&(b+="\x3c/li\x3e")}}b+="\x3c/ul\x3e"}}}b+="\x3c/ul\x3e"}}}$(".dropdown").append(b);index.loadMenuEvent()},modifyPass:function(){$(".modify_pass").click(function(){common.openWindow({name:"modifypass",type:1,url:common.root+"/html/modifypass.html"})})},removeTable:function(){if(0!=table.obj.length)for(var a=0;a<table.obj.length;a++){var e=$(table.obj[a][0]).attr("id");0==$("#"+e).size()&&table.obj.splice(a,1)}},openobj:null,menu_id:"",openMenu:function(a,e,b){if(index.changeFun()){common.load.load("\u83dc\u5355\u6253\u5f00\u4e2d");index.addStateInfo("");$(".sticky-header").data("menuurl",e);$(".dropdown li").removeClass("open_menu");$(a).parent().addClass("open_menu");$(".datetimepicker").remove();$(".daterangepicker").remove();var g=$(a).attr("menu_id");""!=e&&null!=e&&common.ajax({url:"/"+e,dataType:"html",loadfun:function(b,h){if(b)if(common.load.hide("","\u6253\u5f00\u6210\u529f"),$("html").getNiceScroll(0).doScrollTop(0,0),$(".wrapper").html(h),null==a)$(".homehead_ .breadcrumb").html("\x3cli class\x3d'active' \x3e\u94f6\u57ce\u5343\u4e07\u95f4\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf\x3c/li\x3e");else{b=$(a).find("span").text();0==window.location.host.indexOf("localhost")&&(b+="--"+e);h=$(a).parent().parent().parent().find("a").first().find("span").text();var d=$(a).parent().parent().parent().parent().parent().find("a").first().find("span").text(),c="";""!=d&&(c+="\x3cli\x3e"+d+"\x3c/li\x3e");""!=h&&(c+="\x3cli\x3e"+h+"\x3c/li\x3e");""!=b&&(c+='\x3cli class\x3d"active"\x3e'+b+"\x3c/li\x3e");$(".sticky-header").data("menutitle",c);$(".homehead_ .breadcrumb").html(c);index.openobj=e;index.menu_id=g}else common.load.hide("zoomOut","\u6253\u5f00\u5931\u8d25"),common.alert({msg:"\u9875\u9762\u52a0\u8f7d\u5931\u8d25\uff0c\u9519\u8bef\u4fe1\u606f\uff1a"+h,fun:function(){common.load.hide("zoomOut")}})}})}},addStateInfo:function(a){$(".homehead_ .panelinfo_").html(a)}};$(function(){index.init()});