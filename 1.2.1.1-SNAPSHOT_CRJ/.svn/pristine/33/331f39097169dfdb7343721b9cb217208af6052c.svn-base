'use strict';function _fnFeatureHtmlTable(a){if(""===a.oScroll.sX&&""===a.oScroll.sY)return a.nTable;var h=document.createElement("div"),d=document.createElement("div"),b=document.createElement("div"),c=document.createElement("div"),k=document.createElement("div"),e=document.createElement("div"),f=a.nTable.cloneNode(!1),g=a.nTable.cloneNode(!1),p=a.nTable.getElementsByTagName("thead")[0],l=0===a.nTable.getElementsByTagName("tfoot").length?null:a.nTable.getElementsByTagName("tfoot")[0],n=a.oClasses;d.appendChild(b);k.appendChild(e);c.appendChild(a.nTable);h.appendChild(d);h.appendChild(c);b.appendChild(f);f.appendChild(p);null!==l&&(h.appendChild(k),e.appendChild(g),g.appendChild(l));h.className=n.sScrollWrapper;d.className=n.sScrollHead;b.className=n.sScrollHeadInner;c.className=n.sScrollBody;k.className=n.sScrollFoot;e.className=n.sScrollFootInner;a.oScroll.bAutoCss&&(d.style.overflow="hidden",d.style.position="relative",k.style.overflow="hidden",c.style.overflow="auto");d.style.border="0";d.style.width="100%";k.style.border="0";b.style.width=""!==a.oScroll.sXInner?a.oScroll.sXInner:"100%";f.removeAttribute("id");f.style.marginLeft="0";a.nTable.style.marginLeft="0";null!==l&&(g.removeAttribute("id"),g.style.marginLeft="0");b=$(a.nTable).children("caption");0<b.length&&(b=b[0],"top"===b._captionSide?f.appendChild(b):"bottom"===b._captionSide&&l&&g.appendChild(b));""!==a.oScroll.sX&&(d.style.width=_fnStringToCss(a.oScroll.sX),c.style.width=_fnStringToCss(a.oScroll.sX),null!==l&&(k.style.width=_fnStringToCss(a.oScroll.sX)),$(c).scroll(function(a){d.scrollLeft=this.scrollLeft;null!==l&&(k.scrollLeft=this.scrollLeft)}));""!==a.oScroll.sY&&(c.style.height=_fnStringToCss(a.oScroll.sY));a.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"});a.oScroll.bInfinite&&$(c).scroll(function(){!a.bDrawing&&0!==$(this).scrollTop()&&$(this).scrollTop()+$(this).height()>$(a.nTable).height()-a.oScroll.iLoadGap&&a.fnDisplayEnd()<a.fnRecordsDisplay()&&(_fnPageChange(a,"next"),_fnCalculateEnd(a),_fnDraw(a))});a.nScrollHead=d;a.nScrollFoot=k;return h}function _fnScrollDraw(a){var h=a.nScrollHead.getElementsByTagName("div")[0],d=h.getElementsByTagName("table")[0],b=a.nTable.parentNode,c,k,e,f,g,p,l,n,q=[],r=[],t=null!==a.nTFoot?a.nScrollFoot.getElementsByTagName("div")[0]:null,w=null!==a.nTFoot?t.getElementsByTagName("table")[0]:null,m=a.oBrowser.bScrollOversize,u=function(a){l=a.style;l.paddingTop="0";l.paddingBottom="0";l.borderTopWidth="0";l.borderBottomWidth="0";l.height=0};$(a.nTable).children("thead, tfoot").remove();c=$(a.nTHead).clone()[0];a.nTable.insertBefore(c,a.nTable.childNodes[0]);e=a.nTHead.getElementsByTagName("tr");f=c.getElementsByTagName("tr");null!==a.nTFoot&&(g=$(a.nTFoot).clone()[0],a.nTable.insertBefore(g,a.nTable.childNodes[1]),p=a.nTFoot.getElementsByTagName("tr"),g=g.getElementsByTagName("tr"));""===a.oScroll.sX&&(b.style.width="100%",h.parentNode.style.width="100%");var v=_fnGetUniqueThs(a,c);c=0;for(k=v.length;c<k;c++)n=_fnVisibleToColumnIndex(a,c),v[c].style.width=a.aoColumns[n].sWidth;null!==a.nTFoot&&_fnApplyToChildren(function(a){a.style.width=""},g);a.oScroll.bCollapse&&""!==a.oScroll.sY&&(b.style.height=b.offsetHeight+a.nTHead.offsetHeight+"px");c=$(a.nTable).outerWidth();""===a.oScroll.sX?(a.nTable.style.width="100%",m&&($("tbody",b).height()>b.offsetHeight||"scroll"==$(b).css("overflow-y"))&&(a.nTable.style.width=_fnStringToCss($(a.nTable).outerWidth()-a.oScroll.iBarWidth))):""!==a.oScroll.sXInner?a.nTable.style.width=_fnStringToCss(a.oScroll.sXInner):c==$(b).width()&&$(b).height()<$(a.nTable).height()?(a.nTable.style.width=_fnStringToCss(c-a.oScroll.iBarWidth),$(a.nTable).outerWidth()>c-a.oScroll.iBarWidth&&(a.nTable.style.width=_fnStringToCss(c))):a.nTable.style.width=_fnStringToCss(c);c=$(a.nTable).outerWidth();_fnApplyToChildren(u,f);_fnApplyToChildren(function(a){q.push(_fnStringToCss($(a).width()))},f);_fnApplyToChildren(function(a,b){a.style.width=q[b]},e);$(f).height(0);null!==a.nTFoot&&(_fnApplyToChildren(u,g),_fnApplyToChildren(function(a){r.push(_fnStringToCss($(a).width()))},g),_fnApplyToChildren(function(a,b){a.style.width=r[b]},p),$(g).height(0));_fnApplyToChildren(function(a,b){a.innerHTML="";a.style.width=q[b]},f);null!==a.nTFoot&&_fnApplyToChildren(function(a,b){a.innerHTML="";a.style.width=r[b]},g);$(a.nTable).outerWidth()<c?(e=b.scrollHeight>b.offsetHeight||"scroll"==$(b).css("overflow-y")?c+a.oScroll.iBarWidth:c,m&&(b.scrollHeight>b.offsetHeight||"scroll"==$(b).css("overflow-y"))&&(a.nTable.style.width=_fnStringToCss(e-a.oScroll.iBarWidth)),b.style.width=_fnStringToCss(e),a.nScrollHead.style.width=_fnStringToCss(e),null!==a.nTFoot&&(a.nScrollFoot.style.width=_fnStringToCss(e)),""===a.oScroll.sX?_fnLog(a,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):""!==a.oScroll.sXInner&&_fnLog(a,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")):(b.style.width=_fnStringToCss("100%"),a.nScrollHead.style.width=_fnStringToCss("100%"),null!==a.nTFoot&&(a.nScrollFoot.style.width=_fnStringToCss("100%")));""===a.oScroll.sY&&m&&(b.style.height=_fnStringToCss(a.nTable.offsetHeight+a.oScroll.iBarWidth));""!==a.oScroll.sY&&a.oScroll.bCollapse&&(b.style.height=_fnStringToCss(a.oScroll.sY),m=""!==a.oScroll.sX&&a.nTable.offsetWidth>b.offsetWidth?a.oScroll.iBarWidth:0,a.nTable.offsetHeight<b.offsetHeight&&(b.style.height=_fnStringToCss(a.nTable.offsetHeight+m)));m=$(a.nTable).outerWidth();d.style.width=_fnStringToCss(m);h.style.width=_fnStringToCss(m);d=$(a.nTable).height()>b.clientHeight||"scroll"==$(b).css("overflow-y");h.style.paddingRight=d?a.oScroll.iBarWidth+"px":"0px";null!==a.nTFoot&&(w.style.width=_fnStringToCss(m),t.style.width=_fnStringToCss(m),t.style.paddingRight=d?a.oScroll.iBarWidth+"px":"0px");$(b).scroll();if(a.bSorted||a.bFiltered)b.scrollTop=0}function _fnApplyToChildren(a,h,d){for(var b=0,c=0,k=h.length,e,f;c<k;){e=h[c].firstChild;for(f=d?d[c].firstChild:null;e;)1===e.nodeType&&(d?a(e,f,b):a(e,b),b++),e=e.nextSibling,f=d?f.nextSibling:null;c++}};